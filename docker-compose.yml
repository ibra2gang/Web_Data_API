version: '3.8'
services:
  joueur-mongo:
    image: mongo
    container_name: joueur-container
    volumes:
    - joueur-mongo-data:/data/db
    expose:
    - 27017
    ports:
      - "27017:27017"
  joueur-app:
      build: .  # Chemin vers le Dockerfile
      container_name: joueur-app-container
      depends_on:
        - joueur-mongo  # Assure que MongoDB est démarré avant
      environment:
        - SPRING_DATA_MONGODB_HOST=joueur-mongo  # Utilise le nom du service
        - SPRING_DATA_MONGODB_PORT=27017
        - SPRING_DATA_MONGODB_DATABASE=joueurdb
      ports:
        - "8080:8080"  # Port pour accéder à votre application
volumes:
  joueur-mongo-data: